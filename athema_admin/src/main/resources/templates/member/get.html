<style>
.member_align_center { text-align: center; }
</style>

<script>
function edit(mem_code, mem_auth){
	var c = confirm("ê´€ë¦¬ì ê¶Œí•œì„ ìˆ˜ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
	if(c==true) {
		$.ajax({
			url:'[[@{/updateAuth}]]',
			data: {mem_code, mem_auth},
			success: function(data) {
				alert('ê´€ë¦¬ì ê¶Œí•œì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.');
				location.reload();
			},
			error:function(){
				alert('ê´€ë¦¬ì ê¶Œí•œ ë³€ê²½ì— ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.');
			}
		});
	}
}
function delchg(mem_code, mem_del) {
	var dc = confirm("í•´ë‹¹ íšŒì›ì„ íƒˆí‡´ì²˜ë¦¬ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì£¼ì˜, í•´ë‹¹ ë™ì‘ ì‹¤í–‰ í›„ ë³µêµ¬ê°€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.");
	if(dc==true) {
		if(mem_del==1) {
			alert("í•´ë‹¹ íšŒì›ì€ ì´ë¯¸ íƒˆí‡´ì²˜ë¦¬ ë˜ì–´ ì˜êµ¬ ì‚­ì œë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
			return false;
		} else {
			$.ajax({
				url:'[[@{/delchange}]]',
				data: {mem_code, mem_del},
				success: function(data) {
					alert("íƒˆí‡´ ì²˜ë¦¬ ë˜ì—ˆìŠµë‹ˆë‹¤.");
					location.reload();
				},
				error: function(){
					alert("íƒˆí‡´ ì²˜ë¦¬ ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.");
				}
			});
		}
	}
}
function del_per(mem_code) {
	$.ajax({
		url:'[[@{/del}]]',
		data: {'mem_code':mem_code},
		success: function(data) {
			alert("ë°ì´í„°ê°€ ì˜êµ¬íˆ ì‚­ì œ ì²˜ë¦¬ ë˜ì—ˆìŠµë‹ˆë‹¤. \nìƒˆë¡œê³ ì¹¨ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.");
		},
		error: function(){
			alert("ì˜êµ¬ ì‚­ì œ ì²˜ë¦¬ì— ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.");
		}
	});
}
function del(mem_code, mem_del) {
	var d = confirm("í•´ë‹¹ íšŒì› ì •ë³´ë¥¼ ì˜êµ¬íˆ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì£¼ì˜, í•´ë‹¹ ë™ì‘ ì‹¤í–‰ í›„ ë³µêµ¬ê°€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.");
	if(d==true) {
		if(mem_del==0) {
			var dzero = confirm("í•´ë‹¹ íšŒì›ì€ íƒˆí‡´ì²˜ë¦¬ê°€ ì§„í–‰ë˜ì§€ ì•Šì€ íšŒì›ì…ë‹ˆë‹¤.\nê³„ì† í•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
			if (dzero == true) {
				del_per(mem_code);
			} else {
				return false;
			}
		} else {
			del_per(mem_code)
		}
	}
}

</script>

<!-- Begin Page Content -->
<div class="container-fluid">

	<!-- DataTales Example -->
	<div class="card shadow mb-4">
		<div class="card-header py-3">
			<h6 class="m-0 font-weight-bold text-primary">íšŒì› ëª©ë¡</h6>
		</div>
		<div class="card-body">
			<div class="table-responsive">
				<table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
					<thead class="member_align_center">
						<tr>
							<th>íšŒì›ì½”ë“œ</th>
							<th>ì´ë©”ì¼ì£¼ì†Œ</th>
							<th>ì´ë¦„</th>
							<th>ì „í™”ë²ˆí˜¸</th>
							<th>ë‹‰ë„¤ì„</th>
							<th>ìƒë…„ì›”ì¼</th>
							<th>ê°€ì…ì¼</th>
							<th>ê´€ë¦¬ìê¶Œí•œ</th>
							<th>íƒˆí‡´ì—¬ë¶€</th>
							<th>íƒˆí‡´ì¼</th>
							<th>ì™¸ë¶€ì„œë¹„ìŠ¤</th>
							<th>ğŸ—‘ï¸</th>
						</tr>
					</thead>
					<tfoot class="member_align_center">
						<tr>
							<th>íšŒì›ì½”ë“œ</th>
							<th>ì´ë©”ì¼ì£¼ì†Œ</th>
							<th>ì´ë¦„</th>
							<th>ì „í™”ë²ˆí˜¸</th>
							<th>ë‹‰ë„¤ì„</th>
							<th>ìƒë…„ì›”ì¼</th>
							<th>ê°€ì…ì¼</th>
							<th>ê´€ë¦¬ìê¶Œí•œ</th>
							<th>íƒˆí‡´ì—¬ë¶€</th>
							<th>íƒˆí‡´ì¼</th>
							<th>ì™¸ë¶€ì„œë¹„ìŠ¤</th>
							<th>ğŸ—‘ï¸</th>
						</tr>
					</tfoot>
					<tbody>
						<tr th:each="member:${mem_list}">
							<td class="member_align_center" th:text="${member.mem_code}"></td>
							<td style="padding-left:15px;" th:text="${member.mem_email}"></td>
							<td class="member_align_center" th:text="${member.mem_name}"></td>
							<td style="padding-left:15px;" th:text="${member.mem_hp}"></td>
							<td class="member_align_center" th:text="${member.mem_nick}"></td>
							<td class="member_align_center" th:text="${member.mem_birth}"></td>
							<td class="member_align_center" th:text="${#dates.format(member.mem_date, 'YYYY-MM-dd')}"></td>
							<td class="member_align_center" id="auth_change_td"><a id="auth_change" th:onclick="edit([[${member.mem_code}]],[[${member.mem_auth}]])" href="#">[[${member.mem_auth}]]</a></td>
							<td class="member_align_center"><a th:onclick="delchg([[${member.mem_code}]], [[${member.mem_del}]])" href="#">[[${member.mem_del}]]</a></td>
							<td class="member_align_center" th:text="${#dates.format(member.mem_deldate, 'Y-MM-dd')}"></td>
							<td class="member_align_center" th:text="${member.provider}"></td>
							<td class="member_align_center" ><a th:onclick="del([[${member.mem_code}]], [[${member.mem_del}]])" href="#">ì‚­ì œ</a></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>

</div>
<!-- /.container-fluid -->

<!-- Page level plugins -->
<script th:src="@{/vendor/datatables/jquery.dataTables.min.js}"></script>
<script th:src="@{/vendor/datatables/dataTables.bootstrap4.min.js}"></script>

<!-- Page level custom scripts -->
<script th:src="@{/js/demo/datatables-demo.js}"></script>